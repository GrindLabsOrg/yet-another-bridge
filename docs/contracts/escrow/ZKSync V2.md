# zkSync Escrow

## Project Layout

- `/contracts`: Contains source files, solidity smart contracts.
- `/deploy`: Scripts for contract deployment and interaction.
- `/test`: Test files.
- `/artifacts-zk`: Autogenerated with required libraries.
- `hardhat.config.ts`: Configuration settings.

#### About Network Support:

`hardhat.config.ts` comes with a list of networks to deploy and test contracts. Add more by adjusting the `networks` section in the `hardhat.config.ts`. To make a network the default, set the `defaultNetwork` to its name.

You can also override the default using the `--network` option. For example:
`hardhat test --network dockerizedNode`.

## How to Use

- `make deps`: Installs dependencies
- `make zksync-build`: Compiles contracts.
- `make zksync-deploy`: Deploys using script `/deploy/deploy.ts`.
- `make zksync-connect`: Connects itself to saved PaymentRegistry address.
- `make zksync-deploy-and-connect`: Deploys and connects itself to saved PaymentRegistry address.
- `make ethereum-and-zksync-deploy`: Deploys both smart contracts and connects them to each other.

### Local Tests

To run local tests you should first start a local dockerized node. For this you can:
```bash
git clone https://github.com/matter-labs/local-setup.git
cd local-setup
./start.sh
```

Then, to run the contract's tests:
```bash
make zksync-test
```
